{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../_services/product.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\n\nfunction AddProductComponent_option_55_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 26);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const category_r1 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", category_r1.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", category_r1.categoryName, \" \");\n  }\n}\n\nexport let AddProductComponent = /*#__PURE__*/(() => {\n  class AddProductComponent {\n    constructor(productService) {\n      this.productService = productService;\n      this.newProduct = {}; // Object to store new product data\n\n      this.categories = []; // Array to store categories retrieved from backend\n\n      this.newCategory = {};\n    }\n\n    ngOnInit() {\n      this.productService.getProductCategories().subscribe(data => {\n        this.categories = data;\n      });\n    }\n\n    addProduct() {\n      this.productService.getProductCategories().subscribe(data => {\n        this.categories = data;\n        console.log('New product:', this.newProduct);\n        console.log('Category ID:', this.newProduct.category.id); // Check if category ID exists\n        // Find the category object from categories array based on ID\n\n        this.selectedCategory = this.categories.find(category => category.id === this.newProduct.category.id);\n        console.log('Selected Category:', this.selectedCategory);\n\n        if (this.selectedCategory) {\n          // If a matching category is found, assign it to newProduct.category\n          this.newProduct.category = this.selectedCategory;\n        } else {\n          console.log('Category not found for ID:', this.newProduct.category.id); // Handle the case where the category is not found\n          // You can assign a default category or handle it based on your business logic\n        } // Set date_created and last_updated\n\n\n        this.newProduct.date_created = new Date().toISOString();\n        this.newProduct.last_updated = new Date().toISOString();\n        console.log('Updated new product:', this.newProduct); // Add the new product\n\n        this.productService.addProduct(this.newProduct).subscribe(response => {\n          console.log('Product added:', response);\n        }, error => {\n          console.error('Error adding product:', error);\n        });\n      });\n    }\n\n    AddCategory() {\n      this.productService.addCategory(this.newCategory).subscribe(response => {\n        console.log('Category added:', response);\n      }, error => {\n        console.error('Error adding Category:', error);\n      });\n    }\n\n  }\n\n  AddProductComponent.ɵfac = function AddProductComponent_Factory(t) {\n    return new (t || AddProductComponent)(i0.ɵɵdirectiveInject(i1.ProductService));\n  };\n\n  AddProductComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AddProductComponent,\n    selectors: [[\"app-add-product\"]],\n    decls: 59,\n    vars: 12,\n    consts: [[1, \"container\", \"mt-5\"], [1, \"card\", 2, \"padding\", \"20px\"], [3, \"ngSubmit\"], [\"for\", \"name\"], [\"type\", \"text\", \"id\", \"categoryName\", \"name\", \"categoryName\", \"required\", \"\", 1, \"form-control\", \"mb-3\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"submit\", 1, \"btn\", \"btn-outline-primary\", \"form-control\", \"rounded-0\"], [\"for\", \"sku\"], [\"type\", \"text\", \"id\", \"sku\", \"name\", \"sku\", \"required\", \"\", 1, \"form-control\", \"mb-3\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"id\", \"name\", \"name\", \"name\", \"required\", \"\", 1, \"form-control\", \"mb-3\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"description\"], [\"id\", \"description\", \"name\", \"description\", \"required\", \"\", 1, \"form-control\", \"mb-3\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"brand\"], [\"type\", \"text\", \"id\", \"brand\", \"name\", \"brand\", \"required\", \"\", 1, \"form-control\", \"mb-3\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"discount\"], [\"type\", \"number\", \"id\", \"discount\", \"name\", \"discount\", \"required\", \"\", 1, \"form-control\", \"mb-3\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"unit_price\"], [\"type\", \"number\", \"id\", \"unitPrice\", \"name\", \"unitPrice\", \"required\", \"\", 1, \"form-control\", \"mb-3\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"image_url\"], [\"type\", \"text\", \"id\", \"imageUrl\", \"name\", \"imageUrl\", \"required\", \"\", 1, \"form-control\", \"mb-3\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"units_in_stock\"], [\"type\", \"number\", \"id\", \"unitsInStock\", \"name\", \"unitsInStock\", \"required\", \"\", 1, \"form-control\", \"mb-3\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"total_sold\"], [\"type\", \"number\", \"id\", \"totalSold\", \"name\", \"totalSold\", \"required\", \"\", 1, \"form-control\", \"mb-3\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"category_id\"], [\"id\", \"category\", \"name\", \"category\", \"required\", \"\", 1, \"form-control\", \"mb-3\", 3, \"ngModel\", \"ngModelChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"]],\n    template: function AddProductComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"form\", 2);\n        i0.ɵɵlistener(\"ngSubmit\", function AddProductComponent_Template_form_ngSubmit_2_listener() {\n          return ctx.addCategory();\n        });\n        i0.ɵɵelementStart(3, \"label\", 3);\n        i0.ɵɵtext(4, \"Category Name:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"input\", 4);\n        i0.ɵɵlistener(\"ngModelChange\", function AddProductComponent_Template_input_ngModelChange_5_listener($event) {\n          return ctx.newCategory.name = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(6, \"br\")(7, \"br\");\n        i0.ɵɵelementStart(8, \"button\", 5);\n        i0.ɵɵtext(9, \" Add Category \");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelement(10, \"br\")(11, \"br\")(12, \"br\");\n        i0.ɵɵelementStart(13, \"div\", 0)(14, \"div\", 1)(15, \"form\", 2);\n        i0.ɵɵlistener(\"ngSubmit\", function AddProductComponent_Template_form_ngSubmit_15_listener() {\n          return ctx.addProduct();\n        });\n        i0.ɵɵelementStart(16, \"label\", 6);\n        i0.ɵɵtext(17, \"SKU:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"input\", 7);\n        i0.ɵɵlistener(\"ngModelChange\", function AddProductComponent_Template_input_ngModelChange_18_listener($event) {\n          return ctx.newProduct.sku = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(19, \"br\");\n        i0.ɵɵelementStart(20, \"label\", 3);\n        i0.ɵɵtext(21, \"Name:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"input\", 8);\n        i0.ɵɵlistener(\"ngModelChange\", function AddProductComponent_Template_input_ngModelChange_22_listener($event) {\n          return ctx.newProduct.name = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(23, \"br\");\n        i0.ɵɵelementStart(24, \"label\", 9);\n        i0.ɵɵtext(25, \"Description:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"textarea\", 10);\n        i0.ɵɵlistener(\"ngModelChange\", function AddProductComponent_Template_textarea_ngModelChange_26_listener($event) {\n          return ctx.newProduct.description = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(27, \"br\");\n        i0.ɵɵelementStart(28, \"label\", 11);\n        i0.ɵɵtext(29, \"Brand:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(30, \"input\", 12);\n        i0.ɵɵlistener(\"ngModelChange\", function AddProductComponent_Template_input_ngModelChange_30_listener($event) {\n          return ctx.newProduct.brand = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(31, \"br\");\n        i0.ɵɵelementStart(32, \"label\", 13);\n        i0.ɵɵtext(33, \"Discount:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(34, \"input\", 14);\n        i0.ɵɵlistener(\"ngModelChange\", function AddProductComponent_Template_input_ngModelChange_34_listener($event) {\n          return ctx.newProduct.discount = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(35, \"br\");\n        i0.ɵɵelementStart(36, \"label\", 15);\n        i0.ɵɵtext(37, \"Unit Price:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(38, \"input\", 16);\n        i0.ɵɵlistener(\"ngModelChange\", function AddProductComponent_Template_input_ngModelChange_38_listener($event) {\n          return ctx.newProduct.unitPrice = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(39, \"br\");\n        i0.ɵɵelementStart(40, \"label\", 17);\n        i0.ɵɵtext(41, \"Image URL:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(42, \"input\", 18);\n        i0.ɵɵlistener(\"ngModelChange\", function AddProductComponent_Template_input_ngModelChange_42_listener($event) {\n          return ctx.newProduct.imageUrl = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(43, \"br\");\n        i0.ɵɵelementStart(44, \"label\", 19);\n        i0.ɵɵtext(45, \"Units in Stock:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(46, \"input\", 20);\n        i0.ɵɵlistener(\"ngModelChange\", function AddProductComponent_Template_input_ngModelChange_46_listener($event) {\n          return ctx.newProduct.unitsInStock = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(47, \"br\");\n        i0.ɵɵelementStart(48, \"label\", 21);\n        i0.ɵɵtext(49, \"Total Sold:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(50, \"input\", 22);\n        i0.ɵɵlistener(\"ngModelChange\", function AddProductComponent_Template_input_ngModelChange_50_listener($event) {\n          return ctx.newProduct.totalSold = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(51, \"br\");\n        i0.ɵɵelementStart(52, \"label\", 23);\n        i0.ɵɵtext(53, \"Category:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(54, \"select\", 24);\n        i0.ɵɵlistener(\"ngModelChange\", function AddProductComponent_Template_select_ngModelChange_54_listener($event) {\n          return ctx.newProduct.category = $event;\n        });\n        i0.ɵɵtemplate(55, AddProductComponent_option_55_Template, 2, 2, \"option\", 25);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(56, \"br\");\n        i0.ɵɵelementStart(57, \"button\", 5);\n        i0.ɵɵtext(58, \" Add Product \");\n        i0.ɵɵelementEnd()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngModel\", ctx.newCategory.name);\n        i0.ɵɵadvance(13);\n        i0.ɵɵproperty(\"ngModel\", ctx.newProduct.sku);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.newProduct.name);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.newProduct.description);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.newProduct.brand);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.newProduct.discount);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.newProduct.unitPrice);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.newProduct.imageUrl);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.newProduct.unitsInStock);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.newProduct.totalSold);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.newProduct.category);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.categories);\n      }\n    },\n    dependencies: [i2.NgForOf, i3.ɵNgNoValidate, i3.NgSelectOption, i3.ɵNgSelectMultipleOption, i3.DefaultValueAccessor, i3.NumberValueAccessor, i3.SelectControlValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.RequiredValidator, i3.NgModel, i3.NgForm],\n    styles: [\".container.mt-5[_ngcontent-%COMP%]{margin:0 auto 150px;max-width:800px}\"]\n  });\n  return AddProductComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}