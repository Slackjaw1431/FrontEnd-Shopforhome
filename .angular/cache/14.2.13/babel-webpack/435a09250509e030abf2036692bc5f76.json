{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../_services/product.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\n\nfunction AddProductComponent_option_54_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 28);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const category_r3 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", category_r3.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", category_r3.categoryName, \" \");\n  }\n}\n\nexport let AddProductComponent = /*#__PURE__*/(() => {\n  class AddProductComponent {\n    constructor(productService) {\n      this.productService = productService;\n      this.newProduct = {}; // Object to store new product data\n\n      this.categories = []; // Array to store categories retrieved from backend\n\n      this.newCategory = {};\n    }\n\n    ngOnInit() {\n      this.productService.getProductCategories().subscribe(data => {\n        this.categories = data;\n      });\n    }\n\n    addProduct(form) {\n      this.productService.getProductCategories().subscribe(data => {\n        this.categories = data;\n        console.log('New product:', this.newProduct);\n        console.log('Category ID:', this.newProduct.category.id); // Check if category ID exists\n        // Find the category object from categories array based on ID\n\n        this.selectedCategory = this.categories.find(category => category.id === this.newProduct.category.id);\n        console.log('Selected Category:', this.selectedCategory);\n\n        if (this.selectedCategory) {\n          // If a matching category is found, assign it to newProduct.category\n          this.newProduct.category = this.selectedCategory;\n        } else {\n          console.log('Category not found for ID:', this.newProduct.category.id); // Handle the case where the category is not found\n          // You can assign a default category or handle it based on your business logic\n        } // Set date_created and last_updated\n\n\n        this.newProduct.date_created = new Date().toISOString();\n        this.newProduct.last_updated = new Date().toISOString();\n        console.log('Updated new product:', this.newProduct); // Add the new product\n\n        this.productService.addProduct(this.newProduct).subscribe(response => {\n          console.log('Product added:', response);\n          window.alert('Product added');\n        }, error => {\n          console.error('Error adding product:', error);\n        });\n      });\n    }\n\n    addCategory(form) {\n      if (form.valid) {\n        this.productService.addCategory(this.newCategory).subscribe(response => {\n          console.log('Category added:', response);\n          window.alert('Category added');\n        }, error => {\n          console.error('Error adding Category:', error);\n        });\n      } else {\n        window.alert('Please fill out all details');\n      }\n    }\n\n  }\n\n  AddProductComponent.ɵfac = function AddProductComponent_Factory(t) {\n    return new (t || AddProductComponent)(i0.ɵɵdirectiveInject(i1.ProductService));\n  };\n\n  AddProductComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AddProductComponent,\n    selectors: [[\"app-add-product\"]],\n    decls: 58,\n    vars: 12,\n    consts: [[1, \"container\", \"mt-5\"], [1, \"card\", 2, \"padding\", \"20px\"], [3, \"ngSubmit\"], [\"myForm1\", \"ngForm\"], [\"for\", \"name\"], [\"type\", \"text\", \"id\", \"categoryName\", \"name\", \"categoryName\", \"required\", \"\", 1, \"form-control\", \"mb-3\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"submit\", 1, \"btn\", \"btn-outline-primary\", \"form-control\", \"rounded-0\"], [\"myForm\", \"ngForm\"], [\"for\", \"sku\"], [\"type\", \"text\", \"id\", \"sku\", \"name\", \"sku\", \"required\", \"\", 1, \"form-control\", \"mb-3\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"id\", \"name\", \"name\", \"name\", \"required\", \"\", 1, \"form-control\", \"mb-3\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"description\"], [\"id\", \"description\", \"name\", \"description\", \"required\", \"\", 1, \"form-control\", \"mb-3\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"brand\"], [\"type\", \"text\", \"id\", \"brand\", \"name\", \"brand\", \"required\", \"\", 1, \"form-control\", \"mb-3\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"discount\"], [\"type\", \"number\", \"id\", \"discount\", \"name\", \"discount\", \"required\", \"\", 1, \"form-control\", \"mb-3\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"unit_price\"], [\"type\", \"number\", \"id\", \"unitPrice\", \"name\", \"unitPrice\", \"required\", \"\", 1, \"form-control\", \"mb-3\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"image_url\"], [\"type\", \"text\", \"id\", \"imageUrl\", \"name\", \"imageUrl\", \"required\", \"\", 1, \"form-control\", \"mb-3\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"units_in_stock\"], [\"type\", \"number\", \"id\", \"unitsInStock\", \"name\", \"unitsInStock\", \"required\", \"\", 1, \"form-control\", \"mb-3\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"total_sold\"], [\"type\", \"number\", \"id\", \"totalSold\", \"name\", \"totalSold\", \"required\", \"\", 1, \"form-control\", \"mb-3\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"category_id\"], [\"id\", \"category\", \"name\", \"category\", \"required\", \"\", 1, \"form-control\", \"mb-3\", 3, \"ngModel\", \"ngModelChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"]],\n    template: function AddProductComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r4 = i0.ɵɵgetCurrentView();\n\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"form\", 2, 3);\n        i0.ɵɵlistener(\"ngSubmit\", function AddProductComponent_Template_form_ngSubmit_2_listener() {\n          i0.ɵɵrestoreView(_r4);\n\n          const _r0 = i0.ɵɵreference(3);\n\n          return i0.ɵɵresetView(ctx.addCategory(_r0));\n        });\n        i0.ɵɵelementStart(4, \"label\", 4);\n        i0.ɵɵtext(5, \"Category Name:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"input\", 5);\n        i0.ɵɵlistener(\"ngModelChange\", function AddProductComponent_Template_input_ngModelChange_6_listener($event) {\n          return ctx.newCategory.categoryName = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(7, \"br\")(8, \"br\");\n        i0.ɵɵelementStart(9, \"button\", 6);\n        i0.ɵɵtext(10, \" Add Category \");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(11, \"div\", 0)(12, \"div\", 1)(13, \"form\", 2, 7);\n        i0.ɵɵlistener(\"ngSubmit\", function AddProductComponent_Template_form_ngSubmit_13_listener() {\n          i0.ɵɵrestoreView(_r4);\n\n          const _r1 = i0.ɵɵreference(14);\n\n          return i0.ɵɵresetView(ctx.addProduct(_r1));\n        });\n        i0.ɵɵelementStart(15, \"label\", 8);\n        i0.ɵɵtext(16, \"SKU:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"input\", 9);\n        i0.ɵɵlistener(\"ngModelChange\", function AddProductComponent_Template_input_ngModelChange_17_listener($event) {\n          return ctx.newProduct.sku = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(18, \"br\");\n        i0.ɵɵelementStart(19, \"label\", 4);\n        i0.ɵɵtext(20, \"Name:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"input\", 10);\n        i0.ɵɵlistener(\"ngModelChange\", function AddProductComponent_Template_input_ngModelChange_21_listener($event) {\n          return ctx.newProduct.name = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(22, \"br\");\n        i0.ɵɵelementStart(23, \"label\", 11);\n        i0.ɵɵtext(24, \"Description:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"textarea\", 12);\n        i0.ɵɵlistener(\"ngModelChange\", function AddProductComponent_Template_textarea_ngModelChange_25_listener($event) {\n          return ctx.newProduct.description = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(26, \"br\");\n        i0.ɵɵelementStart(27, \"label\", 13);\n        i0.ɵɵtext(28, \"Brand:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"input\", 14);\n        i0.ɵɵlistener(\"ngModelChange\", function AddProductComponent_Template_input_ngModelChange_29_listener($event) {\n          return ctx.newProduct.brand = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(30, \"br\");\n        i0.ɵɵelementStart(31, \"label\", 15);\n        i0.ɵɵtext(32, \"Discount:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(33, \"input\", 16);\n        i0.ɵɵlistener(\"ngModelChange\", function AddProductComponent_Template_input_ngModelChange_33_listener($event) {\n          return ctx.newProduct.discount = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(34, \"br\");\n        i0.ɵɵelementStart(35, \"label\", 17);\n        i0.ɵɵtext(36, \"Unit Price:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(37, \"input\", 18);\n        i0.ɵɵlistener(\"ngModelChange\", function AddProductComponent_Template_input_ngModelChange_37_listener($event) {\n          return ctx.newProduct.unitPrice = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(38, \"br\");\n        i0.ɵɵelementStart(39, \"label\", 19);\n        i0.ɵɵtext(40, \"Image URL:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(41, \"input\", 20);\n        i0.ɵɵlistener(\"ngModelChange\", function AddProductComponent_Template_input_ngModelChange_41_listener($event) {\n          return ctx.newProduct.imageUrl = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(42, \"br\");\n        i0.ɵɵelementStart(43, \"label\", 21);\n        i0.ɵɵtext(44, \"Units in Stock:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(45, \"input\", 22);\n        i0.ɵɵlistener(\"ngModelChange\", function AddProductComponent_Template_input_ngModelChange_45_listener($event) {\n          return ctx.newProduct.unitsInStock = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(46, \"br\");\n        i0.ɵɵelementStart(47, \"label\", 23);\n        i0.ɵɵtext(48, \"Total Sold:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(49, \"input\", 24);\n        i0.ɵɵlistener(\"ngModelChange\", function AddProductComponent_Template_input_ngModelChange_49_listener($event) {\n          return ctx.newProduct.totalSold = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(50, \"br\");\n        i0.ɵɵelementStart(51, \"label\", 25);\n        i0.ɵɵtext(52, \"Category:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(53, \"select\", 26);\n        i0.ɵɵlistener(\"ngModelChange\", function AddProductComponent_Template_select_ngModelChange_53_listener($event) {\n          return ctx.newProduct.category = $event;\n        });\n        i0.ɵɵtemplate(54, AddProductComponent_option_54_Template, 2, 2, \"option\", 27);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(55, \"br\");\n        i0.ɵɵelementStart(56, \"button\", 6);\n        i0.ɵɵtext(57, \" Add Product \");\n        i0.ɵɵelementEnd()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngModel\", ctx.newCategory.categoryName);\n        i0.ɵɵadvance(11);\n        i0.ɵɵproperty(\"ngModel\", ctx.newProduct.sku);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.newProduct.name);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.newProduct.description);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.newProduct.brand);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.newProduct.discount);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.newProduct.unitPrice);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.newProduct.imageUrl);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.newProduct.unitsInStock);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.newProduct.totalSold);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.newProduct.category);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.categories);\n      }\n    },\n    dependencies: [i2.NgForOf, i3.ɵNgNoValidate, i3.NgSelectOption, i3.ɵNgSelectMultipleOption, i3.DefaultValueAccessor, i3.NumberValueAccessor, i3.SelectControlValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.RequiredValidator, i3.NgModel, i3.NgForm],\n    styles: [\".container.mt-5[_ngcontent-%COMP%]{margin:0 auto 150px;max-width:800px}\"]\n  });\n  return AddProductComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}